{% extends 'msfo8/layout_msfo8.html' %}

{% block title %}
    Load
{% endblock %}

{% block body %}
    <h1>Step 1</h1>

    <script>
        window.addEventListener('DOMContentLoaded', function() {
            var xhr = new XMLHttpRequest();

            // Retrieve the CSRF token from the form or cookie
            var csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value; // Or use cookie if needed

            // Open the POST request
            xhr.open('POST', '/step1/' + {{ id }} + '/', true);

            // Set the X-CSRFToken header with the CSRF token
            xhr.setRequestHeader('X-CSRFToken', csrftoken);

            // Send the request
            xhr.send();
        });
    </script>

    <form action="/step1/{{ id }}" method="post">
        {% csrf_token %}
        <input type="submit" value="Submit" style="display: none;">
    </form>
{% endblock %}
